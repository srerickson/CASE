%div.container(ng-app="boi" ng-controller="EvaluationSetController" ng-init="init(#{@id})")

  / %button(ng-click=" sort_field('name', 'desc') ") sort

  / %input(type="text" ng-model="question_select")

  %table.evaluation_results(ng-class="{sort_asc: sort_order == 'asc', sort_desc: sort_order != 'asc' }")
    %thead
      %tr
        %th(ng-class="{active_sort: sort_field == 'name' }") 
          %a.field_name(ng-click=" set_sort_field('name') ")
            Name         
          %span.toggle_sort(ng-click="toggle_sort_order()")
            %span.entypo

        %th(ng-repeat="question in show_questions"
            ng-class="{active_sort: sort_field == question.position}")

          %a.field_name(ng-click=" set_sort_field({{question.position}}) ")
            {{question.position}}
          %span.toggle_sort(ng-click="toggle_sort_order()")
            %span.entypo


    %tbody
      %tr(ng-repeat="b in birds" 
           ng-controller="BirdResultController" 
           ng-init="bird = b")

        %td {{ bird.name }}
        %td(ng-repeat="question in $parent.show_questions")
          %div.evaluation_result_pie(case-result-pie
            ng-model = "bird.results[question.id]"
            sub-question="$parent.is_sub_question(question)")

